<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <script src="https://kit.fontawesome.com/db5b01b4db.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <title>FAIRSECO</title>

    <style>
        
/*header*/
*,*:before,*:after {
	padding: 0;
	margin: 0;
	border: 0;
	box-sizing: border-box;
}

html,body {overflow-x: hidden; background-color:#ffffff;}

.content{
  padding-top: 89px;
}

.header{
  position: fixed;
  width: 100%;
  top: 0;
  left: 0;
  z-index: 50;
}

.header_body{
  display: flex;
  justify-content: space-between;
  height: 89px;
  align-items: center;
  position: relative;
  padding: 0px 32px 0px 18px; 
}

.logo{
  width: 45%;
}

@media (max-width: 1200px){
    .logo{
        flex-direction: column;
        align-items: center;
    }
    .logo{
        padding-bottom: 20px;
    }
}

@media (max-width: 460px){
    .logo{
        display: none;
    }
}

a {
  text-decoration: none;
}

li {
  list-style: none;
}

ul {
  list-style: none;
  padding-left: 0;
}

.header_list {
  display: flex;
  position: relative;
  z-index: 3;
}

.header_list li{
  margin: 20px 0px 0px 48px;
  font-weight: normal;
  font-family: 'Lato', sans-serif;
}

.header_list i{
  color: #8C9EAE;
  position: absolute;
  left: 6%;
  padding: 10px;
}

.header_list form{
  position: relative;
  top: 20%;
  left: 50%;
  transform: translate(-60%, -50%);
  transition: all 1s;
  width: 40px;
  height: 40px;
  background: #F4F5F7;
  box-sizing: border-box;
  border-radius: 10px;
  border: 1px solid #8C9EAE;
  padding: 5px;
}

.header_list input{
  position: absolute;
  top: 1;
  left: 0;
  width: 100%;
  height: 30px;
  line-height: 30px;
  outline: 0;
  border: 0;
  display: contents;
  font-size: 1em;
  border-radius: 10px;
  padding: 0 20px;
  background: #F4F5F7;
}

.header_list .fa{
  box-sizing: border-box;
  width: 24px;
  height: 24px;
  position: absolute;
  top: 0;
  right: 0;
  border-radius: 50%;
  color: #8C9EAE;
  text-align: center;
  font-size: 1 .2em;
  transition: all 1s;
}

.header_list form:hover{
  width: 200px;
  cursor: pointer;
}

.header_list form:hover input{
  display: block;
}

.header_list form:hover .fa{
  display: none;
}

.header_li{
  color: #244A6F;
  font-size: 22px;
  line-height: 12, 2px;
}

.header_li:hover{
  color: #3B4683;
  text-shadow: 1px 1px 2px grey;
  font-weight: bold ;
}

.fline{
  display: flex;
  border-top: 1px solid #8C9EAE;
}

.top_link{
  background-color: #ffffff;
}



/*body-content*/
.content{
  background-color: #EFF2F8;
  border-radius: 10px;
  border: 1px solid #8C9EAE;
  padding-top: 40px;
  padding-bottom: 60px;
  font-family: 'Lato', sans-serif;
  height: 2000px;
  margin-top: 25px;
  margin-bottom: 25px;
  margin-left: 25px;
  margin-right: 30px;
}

.buttoncontent{
  padding-top: 0px;
  padding-bottom: 60px;
}

.tablink{
  background-color: #EFF2F8;
  color: #4B5762;
  float: left;
  border-radius: 10px 10px 0px 0px;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  font-size: 17px;
  width: 25%;
}

.tablink:hover{
  background-color: #dce6f8;
}

.tabcontent{
  color: #4B5762;
  display: none;
  padding: 100px 20px;
  height: 100%;
  border-radius: 10px 10px 10px 10px;
}

#Overview{
  background-color: #EFF2F8;
}

#Citations{
  background-color: #EFF2F8;
}

#FAIRness{
  background-color: #EFF2F8;
}

#Licenses{
  background-color: #EFF2F8;
}
/*body-table*/
.table_content{
  border-spacing: 5px;
}

.table_content, th,td{
  background-color: #EFF2F8;
  border: 1px solid #EFF2F8;
  border-collapse: collapse;
  border-radius: 7px;
}
th,td{
  background-color: #e3e9f6;
  padding: 15px;
}

th{
  text-align: left;
  background-color: #d7e0f3;
}

.emergency{
  color: red;
  font-size: 20px;
  font-weight: bolder;
}

/*footer*/
.ffline{
  display: flex;
  border-top: 1px solid #8C9EAE;
}

footer{
  background-color: #ffffff;
  color: #5F7080;
}

.logo_foot{
  width: 6%;
}

@media (max-width: 1200px){
  .logo_foot{
      flex-direction: column;
      align-items: center;
  }
  .logo_foot{
      padding-bottom: 20px;
  }
}

@media (max-width: 460px){
  .logo_foot{
      display: none;
  }
}

.foot_img{
  text-align: center;
  padding: 10px;
}

footer ul{
  display: inline;
  position: absolute;
  padding-top: 25px;
}

footer li{
  display: inline;
}

footer a{
  margin: 20px 0px 0px 50px;
  font-weight: normal;
  font-family: 'Lato', sans-serif;
  font-size: 18px;
  text-decoration: none;
  color: #22A6FC;
}

.inc{
  margin-right:90px;
  color: #5F7080;
  font-family: 'Lato', sans-serif;
  font-size: 18px;
}

.mode{
  margin-left: 430px;
  color: #9E9E9E;
  background-color: #EFF2F8;
  box-sizing: border-box;
  border-radius: 10px;
  border: 1px solid #8C9EAE;
  padding: 5px;
}

.mode:hover{
  color: #22A6FC;
  background-color: #e8f3fa;
}
.content {
    height: 100%;
    padding: 0;
}
body {
    padding-top: 89px;
    display: flex;
    min-height: 100vh;
    flex-direction: column;
}
.wrapper {
    flex: 1;
}
    </style>
  </head>

    <body>
        <div class="wrapper">
            <header class="header">
                <div class="header_body">
                    <a href="home.html" class="header_logo">
                        <img class="logo" src="1.jpg">
                    </a>
                    <div class="header_burger">
                        <span></span>
                    </div>
                    <nav class="header_menu">
                        <ul class="header_list">
                            <li class="header_li" onclick="openPage('Overview', this, '#ffffff')">Overview</li>
                            <li class="header_li" onclick="openPage('Citations', this, '#ffffff')">Citations</li>
                            <li class="header_li" onclick="openPage('FAIRness', this, '#ffffff')">FAIRness</li>
                            <li class="header_li" onclick="openPage('Licenses', this, '#ffffff')">Licenses</li>
                            <li class="header_search">
                                <form action="">
                                    <input type="search">
                                    <i class="fa fa-search"></i>
                                </form>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="fline"></div>
            </header>
            <section class="content">
                <div class="buttoncontent">
                <button class="tablink" onclick="openPage('Overview', this, '#dce6f8')">Overview</button>
                <button class="tablink" onclick="openPage('Citations', this, '#dce6f8')" id="defaultOpen">Citations</button>
                <button class="tablink" onclick="openPage('FAIRness', this, '#dce6f8')">FAIRness</button>
                <button class="tablink" onclick="openPage('Licenses', this, '#dce6f8')">Licenses</button>
                </div>
                <div id="Overview" class="tabcontent">
                    <h3>Overview</h3>
                    <p>
                        <table class="table_content" id="licensesContent">
                            <tr>
                              <th></th> 
                              <th>Package</th>
                              <th>Rule</th>
                              <th>Message</th>
                            </tr>
                            <tr>
                              <td><button class="emergency">!</button></td> 
                              <td>NPM:fairseco:1.0.0</td>
                              <td>UNHANDDLED_LICENSE</td>
                              <td>The licence ISC is currently not coverd by policy rules. The licence was declared in package NPM:fairseco:1.0.0</td>
                            </tr>
                        </table>
                    </p>
                </div>
                <div id="Citations" class="tabcontent">
                    <h3>Citations</h3>
                    <p></p> 
                </div>
                <div id="FAIRness" class="tabcontent">
                    <h3>FAIRness</h3>
                    <p></p>
                </div>
                <div id="Licenses" class="tabcontent">
                    <h3>Licenses</h3>
                    <p></p>
                </div>
            </section>
            <footer>
                <div class="ffline"></div>
                <section class="foot">
                    <img class="logo_foot" src="2.jpg">
                    <ul class="foot_list">
                        <li class="inc">Â©2022 FairSeco, Inc.</li>
                        <li><a href="#" onclick="openPage('Overview', this, '#ffffff')">Overview</a></li>
                        <li><a href="#" onclick="openPage('Citations', this, '#ffffff')">Citations</a></li>
                        <li><a href="#" onclick="openPage('FAIRness', this, '#ffffff')">FAIRness</a></li>
                        <li><a href="#" onclick="openPage('Licenses', this, '#ffffff')">Licenses</a></li>
                        <li><a href="dark_home.html" class="mode">Dark mode</a></li>
                    </ul>
                </section>
            </footer>
        </div>

        <script>
            // Site functionality - START
            function openPage(pageName, elmnt, color) {
            // Hide all elements with class="tabcontent" by default */
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
            }
  
            // Remove the background color of all tablinks/buttons
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
            tablinks[i].style.backgroundColor = "";
            }
  
            // Show the specific tab content
            document.getElementById(pageName).style.display = "block";
  
            // Add the specific color to the button used to open the tab content
            elmnt.style.backgroundColor = color;
            }
  
            // Get the element with id="defaultOpen" and click on it
            document.getElementById("defaultOpen").click();
            //

            // Initialisation
            var allData = {{node inserts the data here}};
            var tortellini;
            var howFairIs;
            var searchSeco;
            var SBOM;
            // Site functionality - END

            // A generic way of storing the different data in vars
            for(let i = 0; i < allData.length; i++){
                const element = allData[i];
                switch(element.ReturnName) {
                    case "Tortellini":
                        tortellini = element.ReturnData;
                        break;
                    case "HowFairIs":
                        howFairIs = element.ReturnData;
                        break;
                    case "SearchSeco":
                        searchSeco = element.ReturnData;
                        break;
                    case "SBOM":
                        SBOM = element.ReturnData;
                        break;
                    default:
                        break;
                }
            }
            //

            let violations = tortellini.violations;
            //console.log(document.getElementById("licensesContent").childNodes)
            let violationsTable = document.getElementById("licensesContent").childNodes[1];
            let violationsEntry = violationsTable.childNodes[1];
            let violationsEntryClone = violationsEntry.cloneNode(true);
            console.log(violationsEntry.childNodes);
            console.log(violationsEntryClone.childNodes);

            violationsTable.removeChild(violationsEntry);
            console.log(violationsEntry.childNodes);
            console.log(violationsEntryClone.childNodes);
            // Violations object
            // .how_to_fix
            // .license
            // .license_source
            // .message
            // .pkg
            // .rule
            // .severity
            for (let i = 0; i < violations.length; i++){
                let violation = violations[i];
                
                // Add them to the webapp
                violationsEntryClone = violationsEntryClone.cloneNode(true);
                console.log(violationsEntryClone);
                console.log(violationsEntryClone.childNodes[3].textContent);
                violationsEntryClone.childNodes[3].firstChild.textContent = violation.pkg;
                violationsEntryClone.childNodes[5].firstChild.textContent = violation.rule;
                violationsEntryClone.childNodes[7].firstChild.textContent = violation.message;
                violationsTable.appendChild(violationsEntryClone);
            }


            // Debugging
            console.log("Tortellini:");
            console.log(tortellini);
            console.log("HowFairIs:")
            console.log(howFairIs);
            console.log("SearchSeco:")            
            console.log(searchSeco);
            console.log("SBOM:")            
            console.log(SBOM);
            //
            
        </script>
    </body>
</html>
